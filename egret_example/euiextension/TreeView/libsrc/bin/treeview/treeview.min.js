var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),TreeViewItem=function(t){function e(){var e=t.call(this)||this;return e.myHeight=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.arrowiconBg.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.itemBgRect.addEventListener(egret.TouchEvent.TOUCH_END,this.itemBgRectOnTouchEnd,this),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),this.arrowicon.anchorOffsetX=this.arrowicon.width,this.arrowicon.anchorOffsetY=this.arrowicon.height,this.arrowicon.rotation=-90,this.rootNode.touchEnabled=!1,this.arrowicon.touchEnabled=!1,this.foldericon.touchEnabled=!1,this.content.touchEnabled=!1},e.prototype.dataChanged=function(){"undefined"==typeof this.data.arrowicon&&(this.data.arrowicon="resource/assets/TreeView/icon.png"),"undefined"==typeof this.data.foldericon&&(this.data.foldericon={normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"}),"undefined"==typeof this.data.content&&(this.data.content=""),this.arrowicon.source=this.data.arrowicon,this.foldericon.source=this.data.foldericon.normal,this.content.text=this.data.content,"undefined"!=typeof this.data.itemHeight?this.myHeight=this.data.itemHeight:this.myHeight=113.6,this.height=this.myHeight,this.rootNode.height=this.myHeight,this.itemBgRect.height=this.myHeight,this.itemBgRect.width=this.width,"undefined"!=typeof this.data.bgColor?this.itemBgRect.fillColor=this.data.bgColor:(this.itemBgRect.fillColor=16777215,this.data.bgColor=16777215),this.bgRect.fillColor=this.data.bgColor,this.width=this.parent.width-70,"undefined"!=typeof this.data.fontSize&&(this.content.size=this.data.fontSize),("undefined"==typeof this.data.items||null==this.data.items)&&(this.arrowicon.visible=!1,this.arrowiconBg.visible=!1)},e.prototype.update=function(){""!=this.name&&(this.name==TreeView.isSelectName?"undefined"!=typeof this.data.selectedColor?this.itemBgRect.fillColor=this.data.selectedColor:this.itemBgRect.fillColor=0:this.itemBgRect.fillColor=this.data.bgColor)},e.prototype.itemBgRectOnTouchEnd=function(t){t.stopPropagation(),this.name=this.hashCode.toString(),TreeView.isSelectName=this.name,this.popEvent()},e.prototype.popEvent=function(){var t={};t.pos=this.data.pos,0==this.arrowicon.rotation?t.isOpen=!0:t.isOpen=!1,this.dispatchEventWith(TreeView.onClick,!0,t)},e.prototype.onTouchEnd=function(t){if(this.name=this.hashCode.toString(),TreeView.isSelectName=this.name,this.popEvent(),t.stopPropagation(),0==this.arrowicon.rotation)this.arrowicon.rotation=-90,this.foldericon.source=this.data.foldericon.normal,"undefined"!=typeof this.data.items&&null!=this.data.items&&(this.removeChild(this.DataGroup),this.height=this.myHeight,"undefined"!=typeof this.data.that&&(this.data.that.height-=this.height*this.data.items.length));else if(this.arrowicon.rotation=0,this.foldericon.source=this.data.foldericon.press,"undefined"!=typeof this.data.items&&null!=this.data.items){if(this.DataGroup=new eui.DataGroup,this.DataGroup.y=this.height,this.DataGroup.x=70,this.addChild(this.DataGroup),1==this.data.level){this.height+=this.height*this.data.items.length;var i=this,o=function(t){for(var e=0;e<t.length;e++)t[e].that=i,null!=t[e].items&&o(t[e].items)};"undefined"!=typeof this.data.items&&null!=this.data.items&&o(this.data.items)}else{var s=this.height*this.data.items.length;this.height+=s,this.data.that.height+=s}this.DataGroup.dataProvider=new eui.ArrayCollection(this.data.items),this.DataGroup.itemRenderer=e,this.DataGroup.useVirtualLayout=!1}else console.log("没有子数据了")},e}(eui.ItemRenderer);__reflect(TreeViewItem.prototype,"TreeViewItem");var TreeView=function(t){function e(e){function i(t){for(var e=0;e<t.length;e++)t[e].level=1}function o(t,e){for(var i=0;i<t.length;i++){t[i].pos=[];for(var s=0;s<e.length;s++)t[i].pos.push(e[s]);t[i].pos.push(i),null!=t[i].items&&o(t[i].items,t[i].pos)}}void 0===e&&(e=null);var s=t.call(this)||this;s.items=[];return null!=e?s.items=e:s.items=[{arrowicon:"resource/assets/TreeView/icon.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"本地磁盘(C:)",items:[{arrowicon:"resource/arrow_drop_down_72.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"Program Files",items:null}]},{arrowicon:"resource/assets/TreeView/icon.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"本地磁盘(D:)"}],i(s.items),o(s.items,[]),s}return __extends(e,t),e.prototype.partAdded=function(t,e){},e.prototype.childrenCreated=function(){this.Scroller=new eui.Scroller,this.addChild(this.Scroller),this.Scroller.x=0,this.Scroller.y=0,this.DataGroup=new eui.DataGroup,this.DataGroup.y=this.height,this.DataGroup.x=0,this.addChild(this.DataGroup),this.itemDataCollection=new eui.ArrayCollection(this.items),this.DataGroup.dataProvider=this.itemDataCollection,this.DataGroup.itemRenderer=TreeViewItem,this.Scroller.viewport=this.DataGroup,this.DataGroup.useVirtualLayout=!1},e.prototype.setWidth=function(t){this.Scroller.width=t,this.DataGroup.width=t},e.prototype.setHeight=function(t){this.Scroller.height=t},e.prototype.setItemHeight=function(t){this.loopData(this.items,"itemHeight",t)},e.prototype.setItemWidth=function(t){void 0===t&&(t=113.6)},e.prototype.setBgColor=function(t){this.loopData(this.items,"bgColor",t)},e.prototype.setSelectedColor=function(t){this.loopData(this.items,"selectedColor",t)},e.prototype.setFontSize=function(t){this.loopData(this.items,"fontSize",t)},e.prototype.loopData=function(t,e,i){for(var o=0;o<t.length;o++)t[o][e]=i,null!=t[o].items&&this.loopData(t[o].items,e,i)},e.isSelectName="",e.onClick="treeViewTestOnClick",e}(eui.Component);__reflect(TreeView.prototype,"TreeView",["eui.UIComponent"]);