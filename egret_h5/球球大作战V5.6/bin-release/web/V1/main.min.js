var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function r(r){e.call(i,r,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?r(a):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Circle=function(t){function e(e,i){var r=t.call(this)||this;return r.isLive=!1,r.colorList=[13408665,16777113,6710937,6710937,16750848,16776960,39372,13421721,13382553,10079232,16737894,16776960,3381708,13395456],r.init(e,i),r}return __extends(e,t),e.prototype.init=function(t,e){this.shape=new egret.Shape,this.radius=t,this.bulk=3.14*this.radius*this.radius,this.cirName=e,this.color=this.colorList[Math.floor(Math.random()*this.colorList.length)],this.isLive=!0,this.shape.graphics.beginFill(this.color),this.shape.graphics.drawCircle(0,0,t),this.shape.graphics.endFill(),this.addChild(this.shape),"myCirclr"==this.cirName&&(this.skin=new egret.Bitmap(RES.getRes("form1_png")),this.skin.width=this.skin.height=2*t,this.skin.anchorOffsetX=t,this.skin.anchorOffsetY=t,this.addChild(this.skin),this.skinName="form1_png")},e.produce=function(t,i){null==e.cacheCircle[i]&&(e.cacheCircle[i]=[]);var r,a=e.cacheCircle[i];return a.length>0?(r=a.pop(),r.isLive=!0):r=new e(t,i),r},e.reclaim=function(t,i){null==e.cacheCircle[i]&&(e.cacheCircle[i]=[]);var r=e.cacheCircle[i];-1==r.indexOf(t)&&(t.radius=15,r.push(t))},e}(egret.Sprite);Circle.cacheCircle={},__reflect(Circle.prototype,"Circle");var GamePanel=function(t){function e(){var e=t.call(this)||this;return e.myCirR=15,e.bootCirNum=10,e.bootCirArr=[],e.dirX=!1,e.dirY=!1,e.lastX=[],e.lastY=[],e.bootAlgea=[],e.bootAlgeaNum=300,e.algeaKindName=["circle","rect"],e.scanlBase=.1,e.lastEatAlgea=50,e.isFilter=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.gameBackGround=new egret.Bitmap(RES.getRes("timg_jpg")),this.touchEnabled=!0,this.gameBackGround.x=-(this.gameBackGround.width-GameManager.stage.stageWidth)/2,this.gameBackGround.y=-(this.gameBackGround.height-GameManager.stage.stageHeight)/2,this.addChild(this.gameBackGround),this.control_bg=new egret.Shape,this.control_bg.graphics.beginFill(16777215,.2),this.control_bg.graphics.drawCircle(0,0,100),this.control_bg.graphics.endFill(),this.control_bg.x=120,this.control_bg.y=360,this.control_bg.touchEnabled=!0,this.addChild(this.control_bg),this.control_ball=new egret.Shape,this.control_ball.graphics.beginFill(16711697,.5),this.control_ball.graphics.drawCircle(0,0,15),this.control_ball.graphics.endFill(),this.control_ball.x=120,this.control_ball.y=360,this.addChild(this.control_ball),this.myCirclr=Circle.produce(this.myCirR,"myCirclr"),this.myCirclr.x=GameManager.stage.stageWidth/2,this.myCirclr.y=GameManager.stage.stageHeight/2,this.addChild(this.myCirclr),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.creatCircle(),this.creatAlgea(),this.addChildAt(this.myCirclr,this.numChildren-1),this.Timer=new egret.Timer(2e3),this.Timer.addEventListener(egret.TimerEvent.TIMER,this.reGraCir,this),this.Timer.start(),this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdata,this),this.myCirBulk=new egret.TextField,this.myCirBulk.text="当前体积：",this.myCirBulk.textColor=16777215,this.myCirBulk.size=12,this.myCirBulk.x=GameManager.stage.stageWidth/2-200,this.myCirBulk.y=GameManager.stage.stageHeight/2-230,this.addChild(this.myCirBulk)},e.prototype.applyGlowFilter=function(t){var e=3394815,i=.8,r=35,a=35,s=2,h=3,o=!1,l=!1,n=new egret.GlowFilter(e,i,r,a,s,h,o,l);t.filters=[n]},e.prototype.creatCircle=function(){for(;this.bootCirArr.length<this.bootCirNum;){var t=Math.floor(Math.random()*(this.gameBackGround.height-30))+this.gameBackGround.y,e=Math.floor(Math.random()*(this.gameBackGround.width-30))+this.gameBackGround.x,i=Circle.produce(15,"kind1");i.x=e,i.y=t,this.addChild(i),this.bootCirArr.push(i),this.lastX[this.bootCirArr.length-1]=1,this.lastY[this.bootCirArr.length-1]=1}},e.prototype.creatAlgea=function(){for(;this.bootAlgea.length<this.bootAlgeaNum;){var t=Math.floor(Math.random()*(this.gameBackGround.height-10))+this.gameBackGround.y,e=Math.floor(Math.random()*(this.gameBackGround.width-10))+this.gameBackGround.x,i=Algea.produce(4,this.algeaKindName[Math.floor(Math.random()*this.algeaKindName.length)]);i.x=i.algeaX=e,i.y=i.algeaY=t,this.addChild(i),this.bootAlgea.push(i)}},e.prototype.onTouch=function(t){if(t.target==this.control_bg)this.addEventListener(egret.Event.ENTER_FRAME,this.move,this),this.X=t.localX+120,this.Y=t.localY+360,this.control_ball.x=120+t.localX,this.control_ball.y=360+t.localY;else{this.addEventListener(egret.Event.ENTER_FRAME,this.move,this),this.X=t.localX,this.Y=t.localY;var e=120-t.localX,i=360-t.localY,r=Math.sqrt(e*e+i*i);t.localX>120&&t.localY<360&&(this.control_ball.y=360-100/r*(360-t.localY),this.control_ball.x=120+100/r*(t.localX-120)),t.localX>120&&t.localY>360&&(this.control_ball.y=360+100/r*(t.localY-360),this.control_ball.x=120+100/r*(t.localX-120)),t.localX<120&&t.localY<360&&(this.control_ball.y=360-100/r*(360-t.localY),this.control_ball.x=120-100/r*(120-t.localX)),t.localX<120&&t.localY>360&&(this.control_ball.y=360+100/r*(t.localY-360),this.control_ball.x=120-100/r*(120-t.localX))}},e.prototype.move=function(t){var e,i,r,a=3;if(this.X>120&&this.Y<360){if(this.gameBackGround.x>-(this.gameBackGround.width-(GameManager.stage.stageWidth/2+this.myCirclr.radius))){for(this.gameBackGround.x-=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.x-=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.x=r.algeaX=r.x-Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.x=-(this.gameBackGround.width-GameManager.stage.stageWidth/2-this.myCirclr.radius);if(this.gameBackGround.y<GameManager.stage.stageHeight/2-this.myCirclr.radius){for(this.gameBackGround.y-=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.y-=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.y=r.algeaY=r.y-Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.y=GameManager.stage.stageHeight/2-this.myCirclr.radius}if(this.X>120&&this.Y>360){if(this.gameBackGround.x>-(this.gameBackGround.width-(GameManager.stage.stageWidth/2+this.myCirclr.radius))){for(this.gameBackGround.x-=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.x-=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.x=r.algeaY=r.x-Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.x=-(this.gameBackGround.width-GameManager.stage.stageWidth/2-this.myCirclr.radius);if(this.gameBackGround.y>-(this.gameBackGround.height-(GameManager.stage.stageHeight/2+this.myCirclr.radius))){for(this.gameBackGround.y-=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.y-=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.y=r.algeaY=r.y-Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.y=-(this.gameBackGround.height-(GameManager.stage.stageHeight/2+this.myCirclr.radius))}if(this.X<120&&this.Y<360){if(this.gameBackGround.x<GameManager.stage.stageWidth/2-this.myCirclr.radius){for(this.gameBackGround.x+=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.x+=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.x=r.algeaX=r.x+Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.x=GameManager.stage.stageWidth/2-this.myCirclr.radius;if(this.gameBackGround.y<GameManager.stage.stageHeight/2-this.myCirclr.radius){for(this.gameBackGround.y+=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.y+=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.y=r.algeaY=r.y+Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.y=GameManager.stage.stageHeight/2-this.myCirclr.radius}if(this.X<120&&this.Y>360){if(this.gameBackGround.x<GameManager.stage.stageWidth/2-this.myCirclr.radius){for(this.gameBackGround.x+=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.x+=Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.x=r.algeaX=r.x+Math.cos(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.x=GameManager.stage.stageWidth/2-this.myCirclr.radius;if(this.gameBackGround.y>-(this.gameBackGround.height-(GameManager.stage.stageHeight/2+this.myCirclr.radius))){for(this.gameBackGround.y+=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a,e=0;e<this.bootCirArr.length;e++)i=this.bootCirArr[e],i.y+=Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a;for(e=0;e<this.bootAlgea.length;e++)r=this.bootAlgea[e],r.y=r.algeaY=r.y+Math.sin(Math.atan((this.control_ball.y-360)/(this.control_ball.x-120)))*a}else this.gameBackGround.y=-(this.gameBackGround.height-(GameManager.stage.stageHeight/2+this.myCirclr.radius))}},e.prototype.touchEnd=function(t){t.target==this.control_bg&&(this.control_ball.x=120,this.control_ball.y=360,this.removeEventListener(egret.Event.ENTER_FRAME,this.move,this))},e.prototype.gameViewUpdata=function(t){var e,i;for(e=0;e<this.bootCirArr.length;e++){i=this.bootCirArr[e];var r=Math.random(),a=Math.random();r>=.99&&(this.dirX=!0),(i.x-i.radius<=this.gameBackGround.x||i.x>=this.gameBackGround.x+this.gameBackGround.width-i.radius)&&(this.dirX=!0),this.dirX&&(this.lastX[e]=-this.lastX[e]),a>=.99&&(this.dirY=!0),(i.y-i.radius<=this.gameBackGround.y||i.y>=this.gameBackGround.y+this.gameBackGround.height-i.radius)&&(this.dirY=!0),this.dirY&&(this.lastY[e]=-this.lastY[e]),i.x+=this.lastX[e],i.y+=this.lastY[e],this.dirX=this.dirY=!1,this.gameHitTest(),this.reBirth(),this.myCirBulk.text="当前体积："+Math.floor(100*(this.myCirclr.radius-15)+this.myCirclr.radius)+" kg"}},e.prototype.gameHitTest=function(){var t,e,i,r,a,s=[],h=[];for(t=0;t<this.bootAlgea.length;t++)if(i=this.bootAlgea[t],GameUtil.hitTest(this.myCirclr,i)){var o=this.myCirclr.x-(i.x+i.distance),l=this.myCirclr.y-(i.y+i.distance);Math.sqrt(o*o+l*l)<=this.myCirclr.radius&&(s.push(i),this.myCirclr.bulk+=1,this.myCirclr.radius<=50?this.myCirclr.radius+=.1:this.myCirclr.radius+=.02)}for(t=0;t<this.bootCirArr.length;t++)for(r=this.bootCirArr[t],e=0;e<this.bootAlgea.length;e++)if(i=this.bootAlgea[e],GameUtil.hitTest(r,i)){var o=r.x-(i.x+i.distance),l=r.y-(i.y+i.distance);Math.sqrt(o*o+l*l)<=r.radius&&(s.push(i),r.bulk+=1,r.radius+=.3)}for(;s.length>0;)i=s.pop(),this.removeChild(i),this.bootAlgea.splice(this.bootAlgea.indexOf(i),1),Algea.reclaim(i,i.algeaName);for(t=0;t<this.bootCirArr.length;t++)if(r=this.bootCirArr[t],GameUtil.hitTest2(this.myCirclr,r)){var o=r.x-this.myCirclr.x,l=r.y-this.myCirclr.y,n=this.myCirclr.radius>r.radius?this.myCirclr.radius:r.radius;Math.sqrt(o*o+l*l)<=n&&(this.myCirclr.radius<r.radius?this.gameOver():(h.push(r),this.myCirclr.radius+=r.radius/30,this.myCirclr.bulk+=1))}for(t=0;t<this.bootCirArr.length;t++)for(r=this.bootCirArr[t],e=0;e<this.bootCirArr.length;e++)if(a=this.bootCirArr[e],t!=e&&GameUtil.hitTest2(r,a)){var o=r.x-a.x,l=r.y-a.y,c=r.radius>a.radius?r:a,g=r.radius>a.radius?a:r;Math.sqrt(o*o+l*l)<=c.radius&&(console.log("NPC碰撞"),c.radius+=g.radius/30,c.bulk+=1,h.push(g))}for(;h.length>0;)r=h.pop(),1==r.isLive&&(this.removeChild(r),this.bootCirArr.splice(this.bootCirArr.indexOf(r),1),r.isLive=!1,Circle.reclaim(r,r.cirName))},e.prototype.reBirth=function(){this.creatCircle(),this.creatAlgea(),this.addChildAt(this.myCirclr,this.numChildren-1)},e.prototype.reGraCir=function(){var t,e,i,r,a;if(this.myCirclr.radius<50)for(this.myCirclr.shape.graphics.beginFill(this.myCirclr.color),this.myCirclr.shape.graphics.drawCircle(0,0,this.myCirclr.radius),this.myCirclr.graphics.endFill(),this.myCirclr.skin.anchorOffsetX=this.myCirclr.radius,this.myCirclr.skin.anchorOffsetY=this.myCirclr.radius,this.myCirclr.skin.width=this.myCirclr.skin.height=2*this.myCirclr.radius,this.myCirclr.radius>25&&1==this.isFilter&&(this.isFilter=!1,this.applyGlowFilter(this.myCirclr)),t=0;t<this.bootCirArr.length;t++)e=this.bootCirArr[t],e.shape.graphics.beginFill(e.color),e.shape.graphics.drawCircle(0,0,e.radius),e.shape.graphics.endFill();else{for(this.myCirclr.shape.graphics.beginFill(this.myCirclr.color),this.myCirclr.shape.graphics.drawCircle(0,0,this.myCirclr.radius),this.myCirclr.graphics.endFill(),"form1_png"==this.myCirclr.skinName&&(this.myCirclr.skin=new egret.Bitmap(RES.getRes("form2_png")),this.myCirclr.addChild(this.myCirclr.skin)),this.myCirclr.skin.anchorOffsetX=this.myCirclr.radius,this.myCirclr.skin.anchorOffsetY=this.myCirclr.radius,this.myCirclr.skin.width=this.myCirclr.skin.height=2*this.myCirclr.radius,this.lastWidth=this.gameBackGround.width,this.lastHeight=this.gameBackGround.height,r=this.gameBackGround.x+this.gameBackGround.width/2,a=this.gameBackGround.y+this.gameBackGround.height/2,this.gameBackGround.width=this.gameBackGround.width*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),this.gameBackGround.height=this.gameBackGround.height*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),this.gameBackGround.x+=(this.lastWidth-this.gameBackGround.width)/2,this.gameBackGround.y+=(this.lastHeight-this.gameBackGround.height)/2,t=0;t<this.bootCirArr.length;t++)e=this.bootCirArr[t],e.radius=e.radius*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),e.shape.graphics.beginFill(e.color),e.shape.graphics.drawCircle(0,0,e.radius),e.shape.graphics.endFill(),e.x=e.x*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),e.y=e.y*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),e.x+=(this.lastWidth-this.gameBackGround.width)/3,e.y+=(this.lastWidth-this.gameBackGround.width)/3;for(t=0;t<this.bootAlgea.length;t++)i=this.bootAlgea[t],i.distance=i.distance*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),i.shape.graphics.beginFill(i.color),"circle"==i.algeaName?i.shape.graphics.drawCircle(0,0,i.distance):"rect"==i.algeaName&&i.shape.graphics.drawRect(0,0,2*i.distance,2*i.distance),i.shape.graphics.endFill(),i.x=i.x*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),i.y=i.y*(1-(this.myCirclr.radius-this.lastEatAlgea)/1e3),i.x+=(this.lastWidth-this.gameBackGround.width)/3,i.y+=(this.lastWidth-this.gameBackGround.width)/3}this.lastEatAlgea=this.myCirclr.radius},e.prototype.gameOver=function(){if(console.log("游戏结束"),console.log(this),null!=this.parent){for(var t,e;this.bootAlgea.length>0;)t=this.bootAlgea.pop(),this.removeChild(t),this.bootAlgea.splice(this.bootAlgea.indexOf(t),1),Algea.reclaim(t,t.algeaName);for(;this.bootCirArr.length>0;)e=this.bootCirArr.pop(),1==e.isLive&&(this.removeChild(e),this.bootCirArr.splice(this.bootCirArr.indexOf(e),1),e.isLive=!1,Circle.reclaim(e,e.cirName));this.removeChild(this.myCirclr),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.move,this),this.Timer.stop(),this.Timer.removeEventListener(egret.TimerEvent.TIMER,this.reGraCir,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdata,this),LayerManager.gameLayer.removeChild(this);var i=new GameOverPanel;LayerManager.gameLayer.addChild(i)}},e}(egret.DisplayObjectContainer);__reflect(GamePanel.prototype,"GamePanel");var GameUtil=function(){function t(){}return t.hitTest=function(t,e){var i=t.getBounds(),r=e.getBounds();return i.x=t.x-t.width/2,i.y=t.y-t.height/2,r.x=e.x,r.y=e.y,i.intersects(r)},t.hitTest2=function(t,e){var i=t.getBounds(),r=e.getBounds();return i.x=t.x-t.width/2,i.y=t.y-t.height/2,r.x=e.x-e.width/2,r.y=e.y-e.height/2,i.intersects(r)},t}();__reflect(GameUtil.prototype,"GameUtil");var GameOverPanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.restarGameBtn=new egret.TextField,this.restarGameBtn.text="不服，再来一次!",this.restarGameBtn.x=GameManager.stage.stageWidth/2,this.restarGameBtn.y=GameManager.stage.stageHeight/2,this.restarGameBtn.touchEnabled=!0,this.addChild(this.restarGameBtn),this.restarGameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(){this.restarGameBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),LayerManager.gameLayer.removeChild(this);var t=new GamePanel;LayerManager.gameLayer.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(GameOverPanel.prototype,"GameOverPanel");var Algea=function(t){function e(e,i){var r=t.call(this)||this;return r.isLive=!1,r.colorList=[13408665,16777113,6710937,6710937,16750848,16776960,39372,13421721,13382553,10079232,16737894,16776960,3381708,13395456],r.init(e,i),r}return __extends(e,t),e.prototype.init=function(t,e){this.shape=new egret.Shape,this.distance=t,this.algeaName=e,this.color=this.colorList[Math.floor(Math.random()*this.colorList.length)],this.shape.graphics.beginFill(this.color),"circle"==e?this.shape.graphics.drawCircle(0,0,t):"rect"==e&&this.shape.graphics.drawRect(0,0,2*t,2*t),this.shape.graphics.endFill(),this.isLive=!0,this.addChild(this.shape)},e.produce=function(t,i){null==e.cacheAlgea[i]&&(e.cacheAlgea[i]=[]);var r,a=e.cacheAlgea[i];return r=a.length>0?a.pop():new e(t,i)},e.reclaim=function(t,i){null==e.cacheAlgea[i]&&(e.cacheAlgea[i]=[]);var r=e.cacheAlgea[i];-1==r.indexOf(t)&&r.push(t)},e}(egret.Sprite);Algea.cacheAlgea={},__reflect(Algea.prototype,"Algea");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){LayerManager.init(this.stage);var t=new WelcomePanel;LayerManager.gameLayer.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var GameManager=function(){function t(){}return t}();__reflect(GameManager.prototype,"GameManager");var LayerManager=function(){function t(){}return t.prototype.sconstructor=function(){},t.init=function(t){GameManager.stage=t,t.addChild(this.alertLayer),t.addChild(this.gameLayer),this.fixScreen()},t.fixScreen=function(){egret.Capabilities.isMobile?GameManager.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:GameManager.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},t}();LayerManager.alertLayer=new egret.Sprite,LayerManager.gameLayer=new egret.Sprite,__reflect(LayerManager.prototype,"LayerManager");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,r){function a(t){e.call(r,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(r))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var WelcomePanel=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.starGameBtn=new egret.TextField,this.starGameBtn.text="开始游戏",this.starGameBtn.x=GameManager.stage.stageWidth/2,this.starGameBtn.y=GameManager.stage.stageHeight/2,this.starGameBtn.touchEnabled=!0,this.addChild(this.starGameBtn),this.starGameBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(){this.starGameBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),LayerManager.gameLayer.removeChild(this);var t=new GamePanel;LayerManager.gameLayer.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(WelcomePanel.prototype,"WelcomePanel");