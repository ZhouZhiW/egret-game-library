var AssetAdapter=function(){function e(){}var t=(__define,e);return p=t.prototype,p.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,function(e){n(e)},this)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(e){function t(){e.call(this),this.w=0,this.h=0,this.createGameScene()}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createGameScene=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("PreLoadingBg_png"),this.addChild(this.bg),this.pgBg=new egret.Bitmap,this.pgBg.texture=RES.getRes("PreLoadingBarBg_png"),this.pgBg.x=this.w/2-this.pgBg.width/2,this.pgBg.y=this.h-this.pgBg.height-50,this.addChild(this.pgBg),this.pgBar=new egret.Bitmap,this.pgBar.texture=RES.getRes("PreLoadingBar_png"),this.pgBar.x=this.w/2-this.pgBar.width/2,this.pgBar.y=this.pgBg.y+20,this.addChild(this.pgBar),this.textField=new egret.TextField,this.textField.size=24,this.textField.textColor=16777215,this.textField.bold=!0,this.textField.stroke=1,this.textField.strokeColor=0,this.addChild(this.textField),this.textField.width=100,this.textField.x=this.w/2-this.textField.width/2,this.textField.y=this.pgBg.y+20,this.textField.textAlign="center",this.textField.text="0%",this.pgBar.width=0},p.setProgress=function(e,t){var i=Math.round(e/t*100);this.textField.text=i+"%",this.pgBar.width=641*(e/t)},t}(eui.UILayer);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t);new eui.Theme("resource/default.thm.json",this.stage);this.addChild(GameLayerManager.gameLayer()),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},p.onConfigComplete=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading",1),RES.loadGroup("preload")},p.onResourceLoadComplete=function(e){"loading"==e.groupName?(this.loadingView=new LoadingUI,GameLayerManager.gameLayer().addChild(this.loadingView)):"preload"==e.groupName&&(GameLayerManager.gameLayer().removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.createGameScene())},p.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},p.createGameScene=function(){game.AppFacade.getInstance().startUp(GameLayerManager.gameLayer()),game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME),game.AppFacade.getInstance().sendNotification(MainNotify.OPEN_MAIN)},t}(eui.UILayer);egret.registerClass(Main,"Main");var WaitPanel=function(e){function t(t){void 0===t&&(t=1),e.call(this),this.bg=new egret.Sprite,this.w=0,this.h=0,this.createView()}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.bg.graphics.beginFill(0,.2),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill(),this.bg.width=this.w,this.bg.height=this.h,this.addChild(this.bg),this.touchEnabled=!0,this.waitImg=new egret.Bitmap,this.waitImg.texture=RES.getRes("loadingCircle_png"),this.addChild(this.waitImg),this.waitImg.x=this.w/2,this.waitImg.y=this.h/2,this.waitImg.anchorOffsetX=this.waitImg.width/2,this.waitImg.anchorOffsetY=this.waitImg.height/2,EffectUtils.rotationEffect(this.waitImg,1e3)},t}(egret.Sprite);egret.registerClass(WaitPanel,"WaitPanel");var EButton=function(e){function t(t,i,n,a,s,r,o){void 0===n&&(n=null),void 0===a&&(a=""),void 0===s&&(s=30),void 0===r&&(r=1),void 0===o&&(o="assets"),e.call(this),this.assets=RES.getRes("assets"),this.isPlayCartoon=!1,this.cartoonType=1,this.param={context:null,data:null},this.param.context=t,this.init(i,n,a,s,r,o)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.init=function(e,t,i,n,a,s){void 0===t&&(t=null),void 0===i&&(i=""),void 0===n&&(n=30),void 0===a&&(a=1),void 0===s&&(s="assets"),this.cartoonType=a,this.backFun=t,this.btnImg=new egret.Bitmap,null==s?this.btnImg.texture=RES.getRes(e):("assets"!=s&&(this.assets=RES.getRes(s)),this.btnImg.texture=this.assets.getTexture(e)),this.addChild(this.btnImg),""!=i&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=n,this.textField.textAlign="center",this.textField.stroke=1,this.textField.strokeColor=0,this.textField.text=i,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},p.onbuttonTouchTap=function(){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1},t=function(){1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(e,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(e,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(e,this)};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(t,this),egret.setTimeout(function(){null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},this,300)}},p.setBindData=function(e){this.param.data=e},p.getBindData=function(){return this.param.data},p.getBitmap=function(){return this.btnImg},t}(egret.DisplayObjectContainer);egret.registerClass(EButton,"EButton");var EImage=function(e){function t(t){e.call(this),this._src=null,this._comp=!1,null!=t&&this.load(t)}__extends(t,e);var i=__define,n=t;return p=n.prototype,i(p,"src",function(){return this._src},function(e){this.load(e)}),t.$=function(e){var t=e.$;return delete e.$,e.onload=null,e.onerror=null,t},p.onLoadBack=function(e,t){if(t==this._src){if(e){var i=new egret.Texture;i._setBitmapData(e),this.texture=i}else this.texture=null;this._comp=!0}},p.load=function(e){if(this._src!=e||!this._comp)if(this._src=e,null!=e&&e.length>0){this._comp=!1;var i=new Image;i.$=this,i.onload=function(){t.$(this).onLoadBack(this,this.src)},i.onerror=function(){t.$(this).onLoadBack(this,this.src)},i.src=e}else this.texture=null,this._comp=!0},p.size=function(e,t){this.width=e,this.height=t},p.move=function(e,t){this.x=e,this.y=t},t.loadAsync=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=new Image,a=new egret.Bitmap;return n.$=a,n.onload=function(){var e=this.$;delete this.$,this.onload=null,this.onerror=null;var n=new egret.Texture;n._setBitmapData(this),e.texture=n,null!=t&&t.apply(i,[e])},n.onerror=function(){var e=this.$;delete this.$,this.onload=null,this.onerror=null,e.texture=null,null!=t&&t.apply(i,null)},n.src=e,a},t}(egret.Bitmap);egret.registerClass(EImage,"EImage");var ETextField=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.setText=function(e){void 0===e&&(e="");var t=new egret.HtmlTextParser;this.textFlow=t.parser(e)},t}(egret.TextField);egret.registerClass(ETextField,"ETextField");var GameConfig;!function(e){function t(){var e=window.navigator.userAgent.toLowerCase(),t=""+e.match(/MicroMessenger/i);return"null"==t?!1:"micromessenger"==t?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function n(){{var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i)}return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function a(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"}function s(){return egret.MainContext.instance.stage}function r(){return egret.MainContext.instance.stage.stageWidth}function o(){return egret.MainContext.instance.stage.stageHeight}e.isOnLine=navigator.onLine,e.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},e.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},e.isWeiXin=t,e.isBigScreen=i,e.systemType=n,e.platformType=a,e.curStage=s,e.curPanel,e.curWidth=r,e.curHeight=o}(GameConfig||(GameConfig={}));var GlobalData;!function(e){e.myName="dily"}(GlobalData||(GlobalData={}));var MainNotify=function(){function e(){}var t=(__define,e);return p=t.prototype,e.OPEN_MAIN="MainNotify_OPEN_MAIN",e.CLOSE_MAIN="MainNotify_CLOSE_MAIN",e.OPEN_ROLE="MainNotify_OPEN_ROLE",e.CLOSE_ROLE="MainNotify_CLOSE_ROLE",e.OPEN_FUNCTION="MainNotify_OPEN_FUNCTION",e.CLOSE_FUNCTION="MainNotify_CLOSE_FUNCTION",e.OPEN_ACTIVITY="MainNotify_OPEN_ACTIVITY",e.CLOSE_ACTIVITY="MainNotify_CLOSE_ACTIVITY",e}();egret.registerClass(MainNotify,"MainNotify");var PanelNotify=function(){function e(){}var t=(__define,e);return p=t.prototype,e.OPEN_ROLE="PANELNOTIFY_OPEN_ROLE",e.CLOSE_ROLE="PANELNOTIFY_CLOSE_ROLE",e.OPEN_BACKPACK="PANELNOTIFY_OPEN_BACKPACK",e.CLOSE_BACKPACK="PANELNOTIFY_CLOSE_BACKPACK",e.OPEN_QIANGHUA="PANELNOTIFY_OPEN_QIANGHUA",e.CLOSE_QIANGHUA="PANELNOTIFY_QIANGHUA",e.OPEN_ZHAOXIAN="PANELNOTIFY_OPEN_ZHAOXIAN",e.CLOSE_ZHAOXIAN="PPANELNOTIFY_ZHAOXIAN",e.OPEN_EQUIPMENT="PANELNOTIFY_OPEN_EQUIPMENT",e.CLOSE_EQUIPMENT="PANELNOTIFY_CLOSE_EQUIPMENT",e.OPEN_CHUANGDANG="PANELNOTIFY_OPEN_CHUANGDANG",e.CLOSE_CHUANGDANG="PANELNOTIFY_CHUANGDANG",e.OPEN_SHOP="PANELNOTIFY_OPEN_SHOP",e.CLOSE_SHOP="PANELNOTIFY_CLOSE_SHOP",e.OPEN_MAP="PANELNOTIFY_OPEN_MAP",e.CLOSE_MAP="PANELNOTIFY_CLOSE_MAP",e}();egret.registerClass(PanelNotify,"PanelNotify");var SceneNotify=function(){function e(){}var t=(__define,e);return p=t.prototype,e.OPEN_HOME="SceneNotify_OPEN_HOME",e.CLOSE_HOME="SceneNotify_CLOSE_HOME",e}();egret.registerClass(SceneNotify,"SceneNotify");var SysNotify=function(){function e(){}var t=(__define,e);return p=t.prototype,e.CONNECT_SERVER_SUCCESS="CONNECT_SERVER_SUCCESS",e.SERVER_BACK_DATA="SERVER_BACK_DATA",e}();egret.registerClass(SysNotify,"SysNotify");var UserInfoNotify=function(){function e(){}var t=(__define,e);return p=t.prototype,e.UPDATE_DATA="UPDATE_DATA",e}();egret.registerClass(UserInfoNotify,"UserInfoNotify");var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},p.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(i.STARTUP,e.StartupCommand)},p.startUp=function(e){this.sendNotification(i.STARTUP,e),this.removeCommand(i.STARTUP)},i.STARTUP="startup",i}(puremvc.Facade);e.AppFacade=t,egret.registerClass(t,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.execute=function(){(new e.SceneManager).register(),(new e.MainManager).register(),(new e.Processor_100_1).register()},i}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,egret.registerClass(t,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.execute=function(){this.facade.registerProxy(new TemplateProxy),this.facade.registerProxy(new GameProxy)},t}(puremvc.SimpleCommand);e.ModelPrepCommand=t,egret.registerClass(t,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.register=function(){this.facade.registerCommand("Processor_100_1",t)},p.execute=function(e){var t=e.getBody(),i=Global.getMessage("user_login"),n=i.decode(t.buffer);console.log("反序列化数据：",n),this.sendNotification(UserInfoNotify.UPDATE_DATA,n)},t.NAME="Processor_100_1",t}(puremvc.SimpleCommand);e.Processor_100_1=t,egret.registerClass(t,"game.Processor_100_1",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);e.StartupCommand=t,egret.registerClass(t,"game.StartupCommand")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.execute=function(){GameLayerManager.gameLayer().panelLayer;this.facade.registerMediator(new e.RoleMediator),this.facade.registerMediator(new e.BackpackMediator),this.facade.registerMediator(new e.QianghuaMediator),this.facade.registerMediator(new e.ZhaoXianMediator),this.facade.registerMediator(new e.ChuangDangMediator),this.facade.registerMediator(new e.ShopMediator),this.facade.registerMediator(new e.MapMediator)},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,egret.registerClass(t,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var UserInfoRequest;!function(e){function t(e,t){var i=Global.getMessage("user_login"),n=new i({userId:e,userName:t}),a=n.toArrayBuffer();SocketManager.sendMessage(100,1,a)}e.sendUserInfo=t}(UserInfoRequest||(UserInfoRequest={}));var P;!function(e){function t(){return game.AppFacade.getInstance().retrieveProxy(TemplateProxy.NAME)}function i(){return game.AppFacade.getInstance().retrieveProxy(GameProxy.NAME)}e.getTemplateDataProxy=t,e.getGameDataProxy=i}(P||(P={}));var ResourceProxyBase=function(e){function t(t){void 0===t&&(t=""),e.call(this,t),this._dataMap=new Array,this._proxyName="",this._proxyName=t}__extends(t,e);var i=(__define,t);return p=i.prototype,p.getData=function(){var e=RES.getRes(this._proxyName);return e},t}(puremvc.Proxy);egret.registerClass(ResourceProxyBase,"ResourceProxyBase",["puremvc.IProxy","puremvc.INotifier"]);var GameProxy=function(e){function t(){e.call(this,t.NAME)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.getGameName=function(){return this.vo||(this.vo=new GameVO),this.vo.gameName},p.setGameName=function(e){this.vo||(this.vo=new GameVO),this.vo.gameName=e},t.NAME="GameProxy",t}(ResourceProxyBase);egret.registerClass(GameProxy,"GameProxy");var TemplateProxy=function(e){function t(){e.call(this,t.NAME)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.getGameData=function(){return this.getData()},t.NAME="template",t}(ResourceProxyBase);egret.registerClass(TemplateProxy,"TemplateProxy");var GameVO=function(){function e(){this.gameName="Eger pro"}var t=(__define,e);return p=t.prototype,e}();egret.registerClass(GameVO,"GameVO");var GameLayerManager=function(e){function t(){e.call(this),this.sceneLayer=new eui.UILayer,this.mainLayer=new eui.UILayer,this.panelLayer=new eui.UILayer,this.effectLayer=new eui.UILayer,this.maskLayer=new eui.UILayer,this.loadLayer=new eui.UILayer,this.init()}__extends(t,e);var i=(__define,t);return p=i.prototype,t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},p.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);egret.registerClass(GameLayerManager,"GameLayerManager");var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.register=function(){this.facade.registerCommand(MainNotify.OPEN_MAIN,i),this.facade.registerCommand(MainNotify.CLOSE_MAIN,i)},p.execute=function(t){var i=(t.getBody(),GameLayerManager.gameLayer().mainLayer);switch(t.getName()){case MainNotify.OPEN_MAIN:null==this.mainUI&&(this.mainUI=new e.MainUI,i.addChild(this.mainUI));break;case MainNotify.CLOSE_MAIN:null!=this.mainUI&&(i.removeChild(this.mainUI),this.mainUI=null)}},i.NAME="MainManager",i}(puremvc.SimpleCommand);e.MainManager=t,egret.registerClass(t,"game.MainManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.register=function(){this.facade.registerCommand(SceneNotify.OPEN_HOME,i),this.facade.registerCommand(SceneNotify.CLOSE_HOME,i)},p.execute=function(t){var i=(t.getBody(),GameLayerManager.gameLayer().sceneLayer);switch(t.getName()){case SceneNotify.OPEN_HOME:null==this.homeCity&&(this.homeCity=new e.HomeCity,i.addChild(this.homeCity));break;case SceneNotify.CLOSE_HOME:null!=this.homeCity&&(i.removeChild(this.homeCity),this.homeCity=null)}},i.NAME="SceneManager",i}(puremvc.SimpleCommand);e.SceneManager=t,egret.registerClass(t,"game.SceneManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/main/ActivityBarSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,t}(eui.Component);e.ActivityBar=t,egret.registerClass(t,"game.ActivityBar")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/main/FunctionBarSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,t}(eui.Component);e.FunctionBar=t,egret.registerClass(t,"game.FunctionBar")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.isHide=!1,this.skinName="src/core/view/main/MainUISkin.exml";var e=new egret.Shape;e.graphics.beginFill(16711680),e.x=this.functionBar.x,e.y=this.functionBar.y,e.graphics.drawRect(0,0,this.functionBar.width,this.functionBar.height),e.graphics.endFill(),this.addChild(e);var i=new egret.Shape;i.graphics.beginFill(16711680),i.x=this.activityBar.x,i.y=this.activityBar.y,i.graphics.drawRect(0,0,this.activityBar.width,this.activityBar.height),i.graphics.endFill(),this.addChild(i),this.mainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMainBtnClick,this),this.functionBar.mask=e,this.activityBar.mask=i,this.functionBar.roleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRoleBtnClick,this),this.functionBar.backpackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackpackBtnClick,this),this.functionBar.qianghuaBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQianghuaBtnClick,this),this.functionBar.zhaoXianBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZhaoXianBtnClick,this),this.functionBar.chuangDangBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChuangDangBtnClick,this),this.functionBar.shopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShopBtnClick,this),this.functionBar.mapBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMapBtnClick,this)}__extends(i,t);var n=(__define,i);return p=n.prototype,p.onMainBtnClick=function(){this.isHide?(this.isHide=!this.isHide,egret.Tween.get(this.functionBar).to({x:291},300,egret.Ease.backOut),egret.Tween.get(this.activityBar).to({y:319},300,egret.Ease.backOut)):(this.isHide=!this.isHide,egret.Tween.get(this.functionBar).to({x:GameConfig.curWidth()},300,egret.Ease.backOut),egret.Tween.get(this.activityBar).to({y:GameConfig.curHeight()},300,egret.Ease.backOut))},p.onRoleBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_ROLE)},p.onBackpackBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_BACKPACK)},p.onQianghuaBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_QIANGHUA)},p.onZhaoXianBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_ZHAOXIAN)},p.onChuangDangBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_CHUANGDANG)},p.onShopBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_SHOP)},p.onMapBtnClick=function(){e.AppFacade.getInstance().sendNotification(PanelNotify.OPEN_MAP)},p.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i}(eui.Component);e.MainUI=t,egret.registerClass(t,"game.MainUI")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/main/RoleInfoSkin.exml"}__extends(t,e);var i=(__define,t);return p=i.prototype,t}(eui.Component);e.RoleInfo=t,egret.registerClass(t,"game.RoleInfo")}(game||(game={}));var BaseMediator=function(e){function t(t,i){void 0===t&&(t=""),void 0===i&&(i=null),e.call(this,t,i),this.isInitialized=!1,this.isPopUp=!1,this.ui=null,this.w=0,this.h=0,this.w=GameConfig.curWidth(),this.h=GameConfig.curHeight()}__extends(t,e);var i=(__define,t);return p=i.prototype,p.showUI=function(e,t,i,n,a,s){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=!1),this.ui=e,this.beforShow(),this.initUI(),this.initData(),PopUpManager.addPopUp(e,t,i,n,a,s)},p.beforShow=function(){},p.initUI=function(){},p.initData=function(){},p.closePanel=function(e){void 0===e&&(e=0),PopUpManager.removePopUp(this.ui,e),this.destroy()},p.destroy=function(){},p.getIsPopUp=function(){return this.isPopUp},p.getIsInit=function(){return this.isInitialized},p.getWidth=function(){return this.ui.width},p.getHeight=function(){return this.ui.height},t}(puremvc.Mediator);egret.registerClass(BaseMediator,"BaseMediator",["puremvc.IMediator","puremvc.INotifier"]);var PopUpManager;!function(e){function t(e,t,i,n,a,s){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t&&(this.darkSprite=new egret.Sprite,this.darkSprite.graphics.clear(),this.darkSprite.graphics.beginFill(0,.3),this.darkSprite.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),this.darkSprite.graphics.endFill(),this.darkSprite.width=GameConfig.curWidth(),this.darkSprite.height=GameConfig.curHeight(),GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)||GameLayerManager.gameLayer().panelLayer.addChild(this.darkSprite),this.darkSprite.touchEnabled=!0,egret.Tween.get(this.darkSprite).to({alpha:1},150),this.darkSprite.visible=!0),GameLayerManager.gameLayer().panelLayer.addChild(e),GameConfig.curPanel=e,0!=i?(e.x=GameConfig.curWidth()/2-i/2,e.y=GameConfig.curHeight()/2-n/2):(i=e.width,n=e.height);var r=GameConfig.curWidth()/2-i/2,o=GameConfig.curHeight()/2-n/2;switch(a){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4,y:e.y-n/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+n/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4,y:e.y-n/4},600,egret.Ease.elasticOut);break;case 3:s?(e.x=-i,egret.Tween.get(e).to({x:r},500,egret.Ease.cubicOut)):(e.x=-i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:s?(e.x=i,egret.Tween.get(e).to({x:r},500,egret.Ease.cubicOut)):(e.x=i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:s?(e.y=-n,egret.Tween.get(e).to({y:o},500,egret.Ease.cubicOut)):(e.y=-n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case 6:s?(e.y=GameConfig.curHeight(),egret.Tween.get(e).to({y:o},500,egret.Ease.cubicOut)):(e.y=n,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}}function i(e,t){void 0===t&&(t=0);var i=function(){GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)&&GameLayerManager.gameLayer().panelLayer.removeChild(this.darkSprite)};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(i,this),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var n=500;0==t&&(n=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&GameLayerManager.gameLayer().panelLayer.removeChild(e)},this,n)}e.darkSprite,e.addPopUp=t,e.removePopUp=i}(PopUpManager||(PopUpManager={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.backpackPanel=new e.BackpackPanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_BACKPACK,PanelNotify.CLOSE_BACKPACK]},p.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_BACKPACK:this.showUI(this.backpackPanel,!1,0,0,1);break;case PanelNotify.CLOSE_BACKPACK:this.closePanel(1)}},p.initUI=function(){this.backpackPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.backpackPanel.readProxy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readProxyButtonClick,this),this.backpackPanel.saveProxy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.saveProxyButtonClick,this)},p.initData=function(){},p.saveProxyButtonClick=function(){P.getGameDataProxy().setGameName(this.backpackPanel.input1.text),this.backpackPanel.showText.text+="保存成功...\n"+P.getGameDataProxy().getGameName()+"\n"},p.readProxyButtonClick=function(){this.backpackPanel.showText.text+=P.getGameDataProxy().getGameName()+"\n"},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="BackpackMediator",i}(BaseMediator);e.BackpackMediator=t,egret.registerClass(t,"game.BackpackMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.chuangDangPanel=new e.ChuangDangPanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_CHUANGDANG,PanelNotify.CLOSE_CHUANGDANG]},p.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_CHUANGDANG:this.showUI(this.chuangDangPanel,!1,0,0,Number(this.chuangDangPanel.input1.text));break;case PanelNotify.CLOSE_CHUANGDANG:this.closePanel(1)}},p.initUI=function(){this.chuangDangPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.chuangDangPanel.readExcel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readExcelButtonClick,this)},p.initData=function(){},p.readExcelButtonClick=function(){egret.setTimeout(function(){this.sendNotification(PanelNotify.OPEN_CHUANGDANG)},this,100),this.closePanel(0)},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="ChuangDangMediator",i}(BaseMediator);e.ChuangDangMediator=t,egret.registerClass(t,"game.ChuangDangMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.mapPanel=new e.MapPanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_MAP,PanelNotify.CLOSE_MAP]},p.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_MAP:this.showUI(this.mapPanel,!1,0,0,5);break;case PanelNotify.CLOSE_MAP:this.closePanel(1)}},p.initUI=function(){this.mapPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.mapPanel.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1Click,this),this.mapPanel.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2Click,this),this.mapPanel.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3Click,this),this.mapPanel.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn4Click,this),this.mapPanel.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn5Click,this),this.mapPanel.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn6Click,this),TipsManager.addTips(this.mapPanel.img1,"没有动画tips！",0),TipsManager.addTips(this.mapPanel.img2,"从下到上渐现",1),TipsManager.addTips(this.mapPanel.img3,"从左向右",2),TipsManager.addTips(this.mapPanel.img4,"从右向左",3)},p.btn1Click=function(){EffectUtils.showTips("从下到上弹出",1)},p.btn2Click=function(){EffectUtils.showTips("从左至右弹出",2)},p.btn3Click=function(){EffectUtils.showTips("从右至左弹出",3)},p.btn4Click=function(){EffectUtils.showTips("从中间弹出渐渐消失",4)},p.btn5Click=function(){EffectUtils.showTips("从大变小",5)},p.btn6Click=function(){EffectUtils.showTips("警告字体颜色",5,!0)},p.initData=function(){},p.readExcelButtonClick=function(){},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="MapMediator",i}(BaseMediator);e.MapMediator=t,egret.registerClass(t,"game.MapMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.qinghuaPanel=new e.QianghuaPanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_QIANGHUA,PanelNotify.CLOSE_QIANGHUA,SysNotify.CONNECT_SERVER_SUCCESS,UserInfoNotify.UPDATE_DATA]},p.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case PanelNotify.OPEN_QIANGHUA:this.showUI(this.qinghuaPanel,!1,0,0,3);break;case PanelNotify.CLOSE_QIANGHUA:this.closePanel(1);break;case SysNotify.CONNECT_SERVER_SUCCESS:this.qinghuaPanel.showText.text+="服务器连接成功...\n";break;case UserInfoNotify.UPDATE_DATA:this.qinghuaPanel.showText.text+="userId:"+t.getUserId()+"\nuserName:"+t.getUserName()}},p.initUI=function(){this.qinghuaPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.qinghuaPanel.connectServer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.connectServerButtonClick,this),this.qinghuaPanel.sendMsg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendMsgButtonClick,this)},p.initData=function(){},p.connectServerButtonClick=function(){SocketManager.connectServer("echo.websocket.org",80)},p.sendMsgButtonClick=function(){UserInfoRequest.sendUserInfo(Number(this.qinghuaPanel.input1.text),this.qinghuaPanel.input2.text)},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="QianghuaMediator",i}(BaseMediator);e.QianghuaMediator=t,egret.registerClass(t,"game.QianghuaMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.rolePanel=new e.RolePanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_ROLE,PanelNotify.CLOSE_ROLE]},p.handleNotification=function(e){e.getBody();
switch(e.getName()){case PanelNotify.OPEN_ROLE:this.showUI(this.rolePanel,!1,0,0,4);break;case PanelNotify.CLOSE_ROLE:this.closePanel(1)}},p.initUI=function(){this.rolePanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.rolePanel.readExcel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readExcelButtonClick,this)},p.initData=function(){},p.readExcelButtonClick=function(){var e=P.getTemplateDataProxy().getGameData();this.rolePanel.showText.text+=e[this.rolePanel.input1.text][this.rolePanel.input2.text]+"\n"},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="RoleMediator",i}(BaseMediator);e.RoleMediator=t,egret.registerClass(t,"game.RoleMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.shopPanel=new e.ShopPanel,this.isPlay1=!1,this.isPlay2=!1,this.isPlay3=!1,this.isPlay4=!1,this.isPlay5=!1,this.isPlay6=!1,this.isPlay7=!1,this.isPlay8=!1,this.isPlay9=!1,this.isPlay10=!1}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_SHOP,PanelNotify.CLOSE_SHOP]},p.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_SHOP:this.showUI(this.shopPanel,!1,0,0,6);break;case PanelNotify.CLOSE_SHOP:this.closePanel(1)}},p.initUI=function(){this.shopPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.shopPanel.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1Click,this),this.shopPanel.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2Click,this),this.shopPanel.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3Click,this),this.shopPanel.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn4Click,this),this.shopPanel.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn5Click,this),this.shopPanel.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn6Click,this),this.shopPanel.btn7.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn7Click,this),this.shopPanel.btn8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn8Click,this),this.shopPanel.btn9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn9Click,this),this.shopPanel.btn10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn10Click,this)},p.initData=function(){},p.btn1Click=function(){this.isPlay1?(EffectUtils.showTips("取消旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img1),this.isPlay1=!1):(EffectUtils.showTips("旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img1,1e3),this.isPlay1=!0)},p.btn2Click=function(){this.isPlay2?(EffectUtils.showTips("取消中心旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img2),this.isPlay2=!1):(EffectUtils.showTips("中心旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img2,1e3),this.isPlay2=!0)},p.btn3Click=function(){EffectUtils.showTips("闪烁特效",5),EffectUtils.blinkEffect(this.shopPanel.img3,1e3)},p.btn4Click=function(){EffectUtils.showTips("抖动特效",5),EffectUtils.shakeObj(this.shopPanel.img4)},p.btn5Click=function(){EffectUtils.showTips("按下弹大",5),EffectUtils.playEffect(this.shopPanel.img5,1)},p.btn6Click=function(){EffectUtils.showTips("按下轻微弹大",5),EffectUtils.playEffect(this.shopPanel.img6,2)},p.btn7Click=function(){EffectUtils.showTips("按下变小放开变大",5),EffectUtils.playEffect(this.shopPanel.img7,3)},p.btn8Click=function(){this.isPlay8?EffectUtils.showTips("正在持续变大变小呢！",5):(this.isPlay8=!0,EffectUtils.showTips("持续变大变小",5),EffectUtils.playScaleEffect(this.shopPanel.img8))},p.btn9Click=function(){this.isPlay9?EffectUtils.showTips("正在上下浮动呢！",5):(this.isPlay9=!0,EffectUtils.showTips("上下浮动特效",5),EffectUtils.flyObj(this.shopPanel.img9,1e3,15))},p.btn10Click=function(){this.isPlay10?EffectUtils.showTips("正在摇头呢！",5):(this.isPlay10=!0,EffectUtils.showTips("摇头特效",5),EffectUtils.rockObj(this.shopPanel.img10,500))},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="ShopMediator",i}(BaseMediator);e.ShopMediator=t,egret.registerClass(t,"game.ShopMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(n){void 0===n&&(n=null),t.call(this,i.NAME,n),this.zhaoXianPanel=new e.ZhaoXianPanel}__extends(i,t);var n=(__define,i);return p=n.prototype,p.listNotificationInterests=function(){return[PanelNotify.OPEN_ZHAOXIAN,PanelNotify.CLOSE_ZHAOXIAN]},p.handleNotification=function(e){e.getBody();switch(e.getName()){case PanelNotify.OPEN_ZHAOXIAN:this.showUI(this.zhaoXianPanel,!1,0,0,5);break;case PanelNotify.CLOSE_ZHAOXIAN:this.closePanel(1)}},p.initUI=function(){this.zhaoXianPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.menuBtn=new EButton(this,"yellowBtn_png",this.onMenuBtnTouchTap,"按钮特效1",30,1,null),this.menuBtn.x=-300,this.menuBtn.y=300,this.zhaoXianPanel.addChild(this.menuBtn),this.setBtn=new EButton(this,"yellowBtn_png",this.onSetBtnTouchTap,"按钮特效12",30,2,null),this.setBtn.x=-300,this.setBtn.y=400,this.zhaoXianPanel.addChild(this.setBtn),this.buttonBtn=new EButton(this,"yellowBtn_png",this.onButtonBtnTouchTap,"按钮特效3",30,3,null),this.buttonBtn.x=-300,this.buttonBtn.y=500,this.zhaoXianPanel.addChild(this.buttonBtn),this.initEffect()},p.initEffect=function(){egret.setTimeout(function(){egret.Tween.get(this.menuBtn).to({x:this.w/2-this.menuBtn.width/2},600,egret.Ease.backOut)},this,150),egret.setTimeout(function(){egret.Tween.get(this.setBtn).to({x:this.w/2-this.setBtn.width/2},600,egret.Ease.backOut)},this,300),egret.setTimeout(function(){egret.Tween.get(this.buttonBtn).to({x:this.w/2-this.buttonBtn.width/2},600,egret.Ease.backOut)},this,450)},p.onMenuBtnTouchTap=function(){},p.onSetBtnTouchTap=function(){},p.onButtonBtnTouchTap=function(){},p.initData=function(){},p.closeButtonClick=function(){this.closePanel(1)},i.NAME="ZhaoXianMediator",i}(BaseMediator);e.ZhaoXianMediator=t,egret.registerClass(t,"game.ZhaoXianMediator")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/BackpackSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.BackpackPanel=t,egret.registerClass(t,"game.BackpackPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/ChuangDangSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ChuangDangPanel=t,egret.registerClass(t,"game.ChuangDangPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/MapSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.MapPanel=t,egret.registerClass(t,"game.MapPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/QianghuaSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.QianghuaPanel=t,egret.registerClass(t,"game.QianghuaPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/RoleSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.RolePanel=t,egret.registerClass(t,"game.RolePanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/ShopSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ShopPanel=t,egret.registerClass(t,"game.ShopPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/panel/ui/ZhaoXianSkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.ZhaoXianPanel=t,egret.registerClass(t,"game.ZhaoXianPanel")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName="src/core/view/scene/HomeCitySkin.exml",this.addEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)}__extends(t,e);var i=(__define,t);return p=i.prototype,p.createCompleteEvent=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this),GameLayerManager.gameLayer().sceneLayer.addChild(this)},p.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t}(eui.Component);e.HomeCity=t,egret.registerClass(t,"game.HomeCity")}(game||(game={}));var SocketManager;!function(e){function t(e,t){void 0===e&&(e=""),void 0===t&&(t=80),Global.showWaritPanel(),this.sock=new egret.WebSocket,this.sock.type="webSocketTypeBinary",this.sock.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.sock.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.sock.connect(e,t)}function i(){Global.hideWaritPanel(),game.AppFacade.getInstance().sendNotification(SysNotify.CONNECT_SERVER_SUCCESS)}function n(){Global.hideWaritPanel();var e=new egret.ByteArray;this.sock.readBytes(e);var t=e.readInt(),i=e.readShort(),n=new egret.ByteArray;e.readBytes(n),game.AppFacade.getInstance().sendNotification("Processor_"+t+"_"+i,n)}function a(e,t,i){Global.showWaritPanel();var n=new egret.ByteArray;n.writeInt(e),n.writeShort(t),n.writeBytes(new egret.ByteArray(i)),this.sock.writeBytes(n)}new egret.WebSocket;e.connectServer=t,e.onSocketOpen=i,e.onReceiveMessage=n,e.sendMessage=a}(SocketManager||(SocketManager={}));var EffectUtils;!function(e){function t(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var i=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this)}}function i(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1}function n(e,t){void 0===t&&(t=1e3),new BitmapBlink(e,t)}function a(e){var t=80,i=e.x;egret.Tween.get(e).to({x:e.x-10},t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,2*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},t)},this,3*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,4*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:i},t)},this,5*t)}function s(e){void 0===e&&(e=1);var t=GameConfig.curPanel,i=40,n=t.x,a=t.y;1==e?(egret.Tween.get(t).to({x:t.x-10},i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:n},i)},this,5*i)):(egret.Tween.get(t).to({x:t.x-10,y:t.y},i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20,y:t.y},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y+15},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y-20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x,y:t.y+10},i)},this,5*i),egret.setTimeout(function(){egret.Tween.get(t).to({x:n,y:a},i)},this,6*i))}function r(e,t,i){switch(void 0===e&&(e=""),void 0===t&&(t=1),void 0===i&&(i=!1),t){case 1:TipsUtils.showTipsDownToUp(e,i);break;case 2:TipsUtils.showTipsLeftOrRight(e,i,!0);break;case 3:TipsUtils.showTipsLeftOrRight(e,i,!1);break;case 4:TipsUtils.showTipsFromCenter(e,i);break;case 5:TipsUtils.showTipsBigToSmall(e,i)}}function o(e,t){if(void 0===t&&(t=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var i=function(){this.isPlayEffectPlay=!1},n=function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(i,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(i,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(i,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(n,this)}}function h(e){var t=function(){if(null!=e){var i=function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)};e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};t()}function c(e,t,i){void 0===i&&(i=50);var n=function(){if(null!=e){var a=function(){egret.Tween.get(e).to({y:e.y-i},t).call(n,this)};egret.Tween.get(e).to({y:e.y+i},t).call(a,this)}};n()}function l(e,t,i){void 0===i&&(i=20);var n=function(){if(null!=e){var a=function(){egret.Tween.get(e).to({rotation:-i},t).call(n,this)};egret.Tween.get(e).to({rotation:i},t).call(a,this)}};n()}function g(e,t,i){void 0===t&&(t=""),void 0===i&&(i=200);for(var n=t.split(""),a=n.length,s=0;a>s;s++)egret.setTimeout(function(){e.appendText(n[Number(this)])},s,i*s)}e.rotationEffect=t,e.removeRotationEffect=i,e.blinkEffect=n,e.shakeObj=a,e.shakeScreen=s,e.showTips=r;e.playEffect=o,e.playScaleEffect=h,e.flyObj=c,e.rockObj=l,e.typerEffect=g}(EffectUtils||(EffectUtils={}));var Global;!function(e){function t(){e.waitPanel=new WaitPanel(1),GameLayerManager.gameLayer().maskLayer.removeChildren(),GameLayerManager.gameLayer().maskLayer.addChild(e.waitPanel)}function i(){null!=e.waitPanel&&GameLayerManager.gameLayer().maskLayer.contains(e.waitPanel)&&GameLayerManager.gameLayer().maskLayer.removeChild(e.waitPanel)}function n(e){var t=new egret.HtmlTextParser;return t.parser(e)}function a(t){return null==e.message&&(e.message=dcodeIO.ProtoBuf.loadProto(RES.getRes("template_proto"))),e.message.build(t)}function s(e){switch(e){case 0:return"零";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七";case 8:return"八";case 9:return"九";default:console.log("default case")}}e.waitPanel,e.showWaritPanel=t,e.hideWaritPanel=i,e.getTextFlow=n,e.message,e.getMessage=a,e.getNumber=s}(Global||(Global={}));var NativeApi;!function(e){function t(e,t){egret.localStorage.setItem(e,t)}function i(e){return egret.localStorage.getItem(e)}function n(e){egret.localStorage.removeItem(e)}function a(){egret.localStorage.clear()}function s(){}function r(){}function o(e){window.open("tel:"+e,"_self")}function h(e){window.open("sms:"+e,"_self")}function c(){return window.location.href}e.setLocalData=t,e.getLocalData=i,e.deleteLocalData=n,e.clearLocalData=a,e.getMic=s,e.getScreen=r,e.callPhone=o,e.sendMessage=h,e.getCurUrl=c,e.curAngle=window.orientation}(NativeApi||(NativeApi={}));var RegUtils;!function(e){function t(e){var t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return t.test(e)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function i(e){if(s(e))return!1;var t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return t.test(e)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function n(e){var t="/^1[3|4|5|7|8][0-9]d{4,8}$/",i=new RegExp(t);return i.test(e)?!0:!1}function a(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/,n="您输入的电话号码不正确!";return e.length>9?t.test(e)?!0:(alert(n),!1):i.test(e)?!0:(alert(n),!1)}function s(e){if(""==e)return!0;var t="^[ ]+$",i=new RegExp(t);return i.test(e)}function r(e){var t=/^[-]{0,1}[0-9]{1,}$/;return t.test(e)}function o(e){var t="^[0-9]+$",i=new RegExp(t);return-1!=e.search(i)?!0:!1}function h(e){var t="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(t);return i.test(e)?!0:!1}function c(e,t){var i=" ",n=-1;if(0==t||1==t){for(;" "==i;)++n,i=e.substr(n,1);e=e.substring(n)}if(0==t||2==t){for(i=" ",n=e.length;" "==i;)--n,i=e.substr(n,1);e=e.substring(0,n+1)}return e}e.checkEmail=t,e.isIP=i,e.checkMobile=n,e.checkPhone=a,e.isNull=s,e.isInteger=r,e.isNumber=o,e.isMoney=h,e.cTrim=c}(RegUtils||(RegUtils={}));var TipsManager;!function(e){function t(e,t,i){void 0===t&&(t=""),void 0===i&&(i=0),null==this._dict&&(this._dict=[]),e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),null==this._dict[e.hashCode]&&(this._dict[e.hashCode]=[],this._dict[e.hashCode].descStr=t,this._dict[e.hashCode].effectType=i)}function i(e){var t=e.currentTarget,i="",n=0;if(null==this._tips){null!=this._dict[t.hashCode]&&(i=this._dict[t.hashCode].descStr,n=this._dict[t.hashCode].effectType),this._tips=new TipsPanel(this._dict[t.hashCode].descStr),GameLayerManager.gameLayer().effectLayer.contains(this._tips)||GameLayerManager.gameLayer().effectLayer.addChild(this._tips);var a=t.parent.localToGlobal(t.x,t.y);switch(a.x=a.x+t.width/2,a.y=a.y-this._tips.getHeight(),a.x+this._tips.getWidth()>GameConfig.curWidth()?a.x=GameConfig.curWidth()-this._tips.getWidth():a.x<0&&(a.x=0),a.y+this._tips.getHeight()>GameConfig.curHeight()?a.y=GameConfig.curHeight()-this._tips.getHeight():a.y<0&&(a.y=0),this._tips.x=a.x,this._tips.y=a.y,n){case 0:this._tips.alpha=0,egret.Tween.get(this._tips).to({alpha:1},300);break;case 1:this._tips.alpha=0,this._tips.y+=this._tips.getHeight(),egret.Tween.get(this._tips).to({alpha:1,y:this._tips.y-this._tips.getHeight()},500,egret.Ease.backOut);break;case 2:this._tips.alpha=0,this._tips.x-=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x+this._tips.getWidth()},500,egret.Ease.backOut);break;case 3:this._tips.alpha=0,this._tips.x+=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x-this._tips.getWidth()},500,egret.Ease.backOut)}}}function n(e){e.currentTarget;if(null!=this._tips){var t=function(){GameLayerManager.gameLayer().effectLayer.contains(this._tips)&&(GameLayerManager.gameLayer().effectLayer.removeChild(this._tips),this._tips=null)};egret.Tween.get(this._tips).to({alpha:0},300).call(t,this)}}e.addTips=t,e.showTips=i,e.removeTips=n}(TipsManager||(TipsManager={}));var TipsPanel=function(e){function t(t){void 0===t&&(t=""),e.call(this),this.descStr="",this.descStr=t,this.initUI()}__extends(t,e);var i=(__define,t);return p=i.prototype,p.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("tipsBg_png"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=0,this.descTF.size=20,this.descTF.x=5,this.descTF.textAlign="center",this.descTF.text=this.descStr;var e=new egret.Rectangle(5,5,5,5);this.bg.scale9Grid=e,this.bg.width=this.descTF.width+10,this.bg.height=3*this.descTF.height,this.descTF.y=this.bg.height/2-this.descTF.height/2+2},p.getHeight=function(){return this.bg.height},p.getWidth=function(){return this.bg.width},t}(eui.Component);egret.registerClass(TipsPanel,"TipsPanel");var BitmapBlink=function(e){function t(t,i,n){void 0===n&&(n=!0),e.call(this),this._target=t,this._time=i,n&&this.start()}__extends(t,e);var i=(__define,t);return p=i.prototype,p.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},p.runDown=function(){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},p.runUp=function(){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},p.checkOver=function(){var e=egret.getTimer();return e-this._currTime>=this._time?(this.destroy(),!0):!1},p.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},t}(egret.EventDispatcher);egret.registerClass(BitmapBlink,"BitmapBlink");var TipsUtils;!function(e){function t(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,i.textColor=t?GameConfig.TextColors.red:GameConfig.TextColors.green,i.alpha=0,i.text=e,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i);var n=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)},a=function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(a,this)}function i(e,t,i){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===i&&(i=!0);var n=new egret.TextField;n.size=24,n.y=GameConfig.curHeight()/2,n.textColor=t?GameConfig.TextColors.red:GameConfig.TextColors.green,n.alpha=0,n.text=e,n.strokeColor=0,n.x=i?-n.width:GameConfig.curWidth(),n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(n)||GameLayerManager.gameLayer().effectLayer.addChild(n),i?egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(n).to({x:GameConfig.curWidth()/2-n.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:n.x+100},500):egret.Tween.get(n).to({x:n.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(n).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(n).to({x:-n.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(n)&&(GameLayerManager.gameLayer().effectLayer.removeChild(n),n=null)},this,1100)}function n(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,i.textColor=t?GameConfig.TextColors.red:GameConfig.TextColors.green,i.alpha=0,i.text=e,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=0,i.scaleY=0;var n=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,1e3)}function a(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,i.textColor=t?GameConfig.TextColors.red:GameConfig.TextColors.green,i.alpha=0,i.text=e,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=4,i.scaleY=4;var n=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(n,this)},this,1e3)}e.showTipsDownToUp=t,e.showTipsLeftOrRight=i,e.showTipsFromCenter=n,e.showTipsBigToSmall=a}(TipsUtils||(TipsUtils={}));