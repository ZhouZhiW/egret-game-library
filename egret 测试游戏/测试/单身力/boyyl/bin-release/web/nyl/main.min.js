var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function a(a){t.call(i,a,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?a(r):RES.getResAsync(e,a,this)}else RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BgBit=function(e){function t(t){var i=e.call(this)||this;return i.Id=t,i}return __extends(t,e),t}(egret.Bitmap);__reflect(BgBit.prototype,"BgBit");var bgshape=function(e){function t(t){var i=e.call(this)||this;return i.Id=t,i}return __extends(t,e),t}(egret.Shape);__reflect(bgshape.prototype,"bgshape");var configData=function(){function e(){}return e}();configData.titel="看看你的男友力有多少",configData.dsc="        男友力就是适合做男朋友的程度，简单来说可以理解为男人味，抽象一点就是男友指数，延伸一下就是很适合做男朋友，让女友产生少女心 ，是存在于情侣间的小粉红；还有升级版的就是“男友力max”，适合做男朋友的程度max（最大）",configData.data=[{title:"风景如画，姑娘让你帮她拍张照，你会选择哪个角度？",result:null,bg:["game1_jpg","game2_jpg","game3_jpg","game4_jpg"]},{title:"游戏打得正high，女友来电，你会等多久才接起电话？",bg:null,result:["A  立即接","B  躲到草丛再接","C  回城再接","D  挂掉"]},{title:"女友带着你，你带着钱，开开心心逛街，偶遇她前任，你会怎么",bg:null,result:["A  马上带女友杀进最贵的店","B  壁咚亲亲一条龙，怎么恩爱怎么来","C  十指紧扣，上前打招呼","D  冤家路窄，当没看见"]},{title:"给你前往另一个地球“开普勒-452b”开荒的机会，下列物品可以选一样带走，你选哪个？",bg:null,result:["A  一只鸡","B  一部能和地球通讯的手机","C  游戏机","D  你最爱的一本书","E  宠物","F  种子","G  生活服务机器人","H  一张最珍贵的照片"]},{title:"我们突破科学，突破性别，能让你和他们互换人生三天，你要和谁换？",bg:null,result:["A  邓超","B  郭敬明","C  凤姐","D  鹿晗","E  范冰冰","F  王思聪","G  不想变"]},{title:"最后一个问题，你一般会选什么风格的图片做微信头像？",bg:null,result:["A  自己的照片","B  和女朋友的合影","C  网络表情","D  抽象图或者偶像","E  随意,看心情"]}],configData.result=[[3,0,2,1],[3,2,1,0],[3,0,1,2],[1,5,0,2,4,3,1,6],[2,0,1,5,1,4,3],[2,4,0,1,3]],configData.selectScore=[],configData.MainLayer=null,configData.gameLevel=0,configData.downUrl=[{img:"down1_jpg",url:"http://q.m1758.com/play/game/quickstart2/745126bf12ed93625c46f699f285862e?chn=quiz_foolish"}],__reflect(configData.prototype,"configData");var gamelayer=function(e){function t(t){var i=e.call(this)||this;return document.body.style.backgroundColor="#f5f5f7",i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(t,e),t.prototype.onAddToStage=function(){var e=new egret.Shape;if(e.graphics.beginFill(16777215),e.graphics.drawRect(0,0,this.stage.stageWidth+300,300),e.graphics.endFill(),this.addChild(e),this.title=new egret.TextField,this.title.text=configData.data[configData.gameLevel].title,this.title.y=100,this.title.x=60,this.addChild(this.title),this.title.size=50,this.title.textColor=0,this.title.width=this.stage.stageWidth-120,this.title.textAlign=egret.HorizontalAlign.CENTER,this.title.verticalAlign=egret.VerticalAlign.MIDDLE,this.title.lineSpacing=20,configData.data[configData.gameLevel].bg)for(var t=configData.data[configData.gameLevel].bg,i=0;i<t.length;i++)this.CreateBG(i,t[i],300);else if(configData.data[configData.gameLevel].result){for(var t=configData.data[configData.gameLevel].result,i=0;i<t.length;i++)this.CreateResult(i,t[i]);var a=new egret.Shape;a.graphics.beginFill(16675931),a.graphics.drawRoundRect(0,0,880,100,50,50),a.graphics.endFill(),this.addChild(a),a.x=540,a.anchorOffsetX=a.width/2,a.y=this.title.y+160*(t.length+1)+200,a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backGame,this);var r=new egret.TextField;r.text="上一题",r.size=50,r.textColor=16777215,r.x=this.stage.stageWidth/2,r.anchorOffsetX=r.width/2,r.y=a.y+25,this.addChild(r)}},t.prototype.backGame=function(e){configData.selectScore.pop(),this.parent.removeChild(this),setTimeout(function(){configData.gameLevel--;var e=new t(configData.gameLevel);configData.MainLayer.addChild(e)},100)},t.prototype.CreateBG=function(e,t,i){var a=new BgBit(e),r=RES.getRes(t);a.texture=r,this.addChild(a),1>=e?(a.x=(a.width+20)*e+25,a.y=this.title.y+i):(a.x=(a.width+20)*(e-2)+25,a.y=this.title.y+i+500+100),a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this)},t.prototype.CreateResult=function(e,t){var i=new bgshape(e);i.graphics.beginFill(16777215),i.graphics.drawRect(0,0,1080,150),i.graphics.endFill(),this.addChild(i),i.x=this.stage.stageWidth/2,i.y=this.title.y+300+160*e,i.anchorOffsetX=i.width/2,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this);var a=this.CreateText(t);a.size=50,a.y=this.title.y+300+160*e+50,a.width=this.stage.stageWidth-80,a.height=50,a.x=a.width/2+40,a.anchorOffsetX=a.width/2,a.textAlign=egret.HorizontalAlign.LEFT,a.verticalAlign=egret.VerticalAlign.MIDDLE,a.textColor=0},t.prototype.enterGame=function(e){configData.selectScore.push(configData.result[configData.gameLevel][e.currentTarget.Id]),this.parent.removeChild(this),setTimeout(function(){if(configData.gameLevel++,configData.gameLevel>configData.data.length-1){var e=new gameOver;configData.MainLayer.addChild(e)}else{var i=new t(configData.gameLevel);configData.MainLayer.addChild(i)}},100)},t.prototype.CreateText=function(e){var t=new egret.TextField;return t.text=e,this.addChild(t),t},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.DisplayObjectContainer);__reflect(gamelayer.prototype,"gamelayer");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){configData.MainLayer=this;var e=new start;this.addChild(e)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var gameOver=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){for(var e=0,t=0;t<configData.selectScore.length;t++)e+=configData.selectScore[t];console.log("s",e),CanvasToimages_1(25-e),this.imageTagVisible(!0)},t.prototype.imageTagVisible=function(e){e?document.getElementById("saveContainer").style.display="block":document.getElementById("saveContainer").style.display="none"},t}(egret.DisplayObjectContainer);__reflect(gameOver.prototype,"gameOver");var start=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){var e=this.createBitmapByName("startbg_png");e.width=1080,e.height=712,e.y=50,this.addChild(e),e.touchEnabled=!0;var t=new egret.TextField;t.text=configData.titel,t.size=50,t.textColor=0,t.x=this.stage.stageWidth/2,t.anchorOffsetX=t.width/2,t.y=e.y+e.height+80,this.addChild(t);var i=new egret.Shape;i.graphics.beginFill(16675931),i.graphics.drawRoundRect(0,0,350,100,50,50),i.graphics.endFill(),this.addChild(i),i.x=this.stage.stageWidth/2,i.anchorOffsetX=i.width/2,i.y=t.y+t.height+80,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this);var a=new egret.TextField;a.text="立即开始",a.size=50,a.textColor=16777215,a.x=this.stage.stageWidth/2,a.anchorOffsetX=a.width/2,a.y=i.y+25,this.addChild(a);var r=new egret.Shape;r.graphics.beginFill(16119287),console.log("s",this,this.stage.stageWidth),r.graphics.drawRect(0,0,this.stage.stageWidth,100),r.graphics.endFill(),this.addChild(r),r.y=i.y+180;var n=new egret.TextField;n.text="测试简介",n.size=55,n.textColor=0,n.x=this.stage.stageWidth/2,n.anchorOffsetX=n.width/2,n.y=r.y+180,this.addChild(n);var o=new egret.TextField;o.text=configData.dsc,o.size=40,o.textColor=10592672,o.width=this.stage.stageWidth-50,o.height=300,o.x=this.stage.stageWidth/2,o.anchorOffsetX=n.width/2,o.y=n.y+100,o.anchorOffsetX=o.width/2,o.lineSpacing=10,this.addChild(o)},t.prototype.enterGame=function(){this.parent.removeChild(this);var e=new gamelayer(configData.gameLevel);configData.MainLayer.addChild(e)},t.prototype.CrateDown=function(){},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.DisplayObjectContainer);__reflect(start.prototype,"start");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,a){function r(e){t.call(a,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(a))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);